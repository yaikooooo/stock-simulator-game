# ğŸ“ˆ è‚¡ç¥¨æ¨¡å— API æ¥å£æ–‡æ¡£

æ¥å£å‰ç¼€ï¼š`/api/stocks`

---

## 1ï¸âƒ£ è·å–å…¨é‡è‚¡ç¥¨å¿«ç…§

**GET** `/api/stocks`

**è¯´æ˜ï¼š** è·å–å…¨å¸‚åœºæ‰€æœ‰è‚¡ç¥¨å¿«ç…§ï¼ˆç”¨äºå¤§ç›˜åˆ·æ–°ã€ç¼“å­˜æ¯”å¯¹ï¼‰

**è¯·æ±‚å‚æ•°ï¼š**

| å‚æ•° | ç±»å‹ | æ˜¯å¦å¿…ä¼  | è¯´æ˜ |
|------|------|----------|------|
| version | string | å¦ | å®¢æˆ·ç«¯ç¼“å­˜ç‰ˆæœ¬ï¼ŒæœåŠ¡ç«¯å¦‚ä¸€è‡´åˆ™è¿”å› `updated: false` |

**è¿”å›ç¤ºä¾‹ï¼š**

```json
{
  "updated": true,
  "version": "2025-04-23-16:10",
  "data": [
    { "code": "sh600519", "name": "è´µå·èŒ…å°", "price": 1888.33, "change": "3.15" }
  ]
}
```

---

## 2ï¸âƒ£ è·å–çƒ­é—¨æ¨èè‚¡ç¥¨

**GET** `/api/stocks/hot`

**è¯´æ˜ï¼š** è·å–å½“å‰æ¶¨å¹…å‰ 20 çš„çƒ­é—¨è‚¡ç¥¨ï¼Œç”¨äºé¦–é¡µæ¨èã€æ¦œå•å±•ç¤º

**è¿”å›ç¤ºä¾‹ï¼š**

```json
{
  "version": "2025-04-23-16:10",
  "data": [
    { "code": "sh600519", "name": "è´µå·èŒ…å°", "price": 1888.33, "change": "3.15" }
  ]
}
```

---

## 3ï¸âƒ£ è·å–è¡Œä¸šæ¿å—è‚¡ç¥¨åˆ—è¡¨

**GET** `/api/stocks/industry/:name`

**è¯´æ˜ï¼š** è·å–æŸä¸ªè¡Œä¸šä¸‹çš„æ‰€æœ‰è‚¡ç¥¨å¿«ç…§ï¼ˆæŒ‰æ¿å—åˆ†ç±»ï¼‰

**è·¯å¾„å‚æ•°ï¼š**

| å‚æ•° | ç±»å‹ | ç¤ºä¾‹ | è¯´æ˜ |
|------|------|------|------|
| name | string | tech, finance | è¡Œä¸šè‹±æ–‡ keyï¼ˆsymbols_all.js ä¸­å®šä¹‰ï¼‰ |

**è¿”å›ç¤ºä¾‹ï¼š**

```json
{
  "version": "2025-04-23-16:10",
  "data": [
    { "code": "sz000001", "name": "å¹³å®‰é“¶è¡Œ", "price": 10.23, "change": "-0.03" }
  ]
}
```

---

## 4ï¸âƒ£ è·å–å•ä¸ªè‚¡ç¥¨è¯¦æƒ…

**GET** `/api/stocks/:code/detail`

**è¯´æ˜ï¼š** è·å–æŸåªè‚¡ç¥¨çš„å½“å‰å¿«ç…§è¯¦æƒ…ã€‚é¦–æ¬¡è®¿é—®å°†è§¦å‘å®æ—¶æŠ“å–å¹¶ç¼“å­˜ï¼Œåç»­ 10 åˆ†é’Ÿå†…å‘½ä¸­æœ¬åœ°ç¼“å­˜æ–‡ä»¶ï¼Œæ— éœ€å†æ¬¡è¯·æ±‚æ•°æ®æºã€‚

**è·¯å¾„å‚æ•°ï¼š**

| å‚æ•° | ç±»å‹ | ç¤ºä¾‹ | è¯´æ˜ |
|------|------|------|------|
| code | string | sh600519 | è‚¡ç¥¨ä»£ç ï¼ˆAè‚¡/æ¸¯è‚¡/ç¾è‚¡ï¼‰ |

**è¿”å›ç¤ºä¾‹ï¼š**

```json
{
  "version": "2025-04-23-16:05",
  "data": {
    "code": "sh600519",
    "name": "è´µå·èŒ…å°",
    "price": 1888.33,
    "change": "3.15",
    "open": 1865.00,
    "previousClose": 1855.12,
    "high": 1899.00,
    "low": 1855.50,
    "volume": 421000,
    "amount": 7894300.00,
    "time": "15:00:03",
    "news": []
  }
}
```

---

## 5ï¸âƒ£ è·å–è‚¡ç¥¨ K çº¿å›¾æ•°æ®

**GET** `/api/stocks/:code/kline`

**è¯´æ˜ï¼š** è·å–æŸæ”¯è‚¡ç¥¨çš„å†å²Kçº¿å›¾æ•°æ®ã€‚é¦–æ¬¡è¯·æ±‚ä¼šæ‹‰å–å¹¶ç¼“å­˜æ•°æ®æ–‡ä»¶ï¼Œåç»­å‘½ä¸­æœ¬åœ°ç¼“å­˜ï¼ˆæŒ‰ `code-period-range` æ–‡ä»¶åˆ†éš”ï¼‰ã€‚

**è·¯å¾„å‚æ•°ï¼š**

| å‚æ•° | ç±»å‹ | ç¤ºä¾‹ | è¯´æ˜ |
|------|------|------|------|
| code | string | sh600519 | è‚¡ç¥¨ä»£ç  |

**æŸ¥è¯¢å‚æ•°ï¼š**

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| period | string | day | å¯é€‰ï¼šday/week/month |
| range | string | 1y | å¯é€‰ï¼š1y/6m/3m ç­‰ |

**è¿”å›ç¤ºä¾‹ï¼š**

```json
{
  "code": "sh600519",
  "period": "day",
  "range": "1y",
  "data": [
    ["2025-04-01", 1850, 1860, 1830, 1880, 320000]
  ]
}
```

---

## 6ï¸âƒ£è‚¡ç¥¨ç›¸å…³æ–°é—»ï¼ˆé¢„ç•™ï¼‰

### `GET /api/stocks/:code/news`

å½“å‰ç‰ˆæœ¬è¿”å›ç©ºæ•°ç»„ï¼Œåç»­æ¥å…¥æ–°é—»æœç´¢æ¥å£ã€‚

---
```
## ğŸ”¹ 7. ç”¨æˆ·èµ„äº§æŸ¥è¯¢

### `GET /api/account/:userId`

è·å–æŒ‡å®šç”¨æˆ·çš„è´¦æˆ·ä½™é¢ï¼ˆäººæ°‘å¸ã€ç¾å…ƒã€æ¬§å…ƒï¼‰ä¸æ€»èµ„äº§ã€‚

---

## ğŸ”¹ 8. ç”¨æˆ·äº¤æ˜“æ¨¡å—

åŒ…å«ç”¨æˆ·çš„è‚¡ç¥¨ä¹°å…¥ã€å–å‡ºã€äº¤æ˜“è®°å½•æŸ¥è¯¢ç­‰æ“ä½œã€‚

---

### âœ… 8.1 ä¹°å…¥è‚¡ç¥¨

- **æ¥å£åœ°å€**ï¼š`POST /api/trade/buy`
- **æ¥å£è¯´æ˜**ï¼šæäº¤ä¹°å…¥äº¤æ˜“è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ ¹æ®è‚¡ç¥¨ä»£ç è·å–å½“å‰å¿«ç…§ä¸­çš„ä»·æ ¼ï¼Œå®Œæˆèµ„é‡‘æ ¡éªŒåè¿›è¡Œä¹°å…¥ã€‚
- **è¯·æ±‚æ–¹å¼**ï¼šPOST
- **è¯·æ±‚å¤´éƒ¨**ï¼š
  - `Content-Type: application/json`

#### ğŸ“¥ è¯·æ±‚ä½“å‚æ•°

| å‚æ•°å | ç±»å‹   | æ˜¯å¦å¿…å¡« | ç¤ºä¾‹å€¼       | è¯´æ˜                 |
|--------|--------|----------|--------------|----------------------|
| userId | string | âœ…       | cm9wmnsmr0000uir8xxeebcia | ç”¨æˆ·å”¯ä¸€ ID          |
| code   | string | âœ…       | sh600519      | è‚¡ç¥¨ä»£ç              |
| name   | string | âœ…       | è´µå·èŒ…å°      | è‚¡ç¥¨åç§°             |
| amount | number | âœ…       | 2             | ä¹°å…¥è‚¡æ•°ï¼ˆæ•´æ•°ï¼‰     |

#### ğŸ“¤ è¿”å›ç»“æœç¤ºä¾‹

```json
{
  "success": true,
  "data": {
    "userId": "cm9wpy4j4000cuibghskg6cfb",
    "code": "sh600519",
    "name": "è´µå·èŒ…å°",
    "type": "BUY",
    "price": 1552.25,
    "amount": 2,
    "fee": 3.1,
    "createdAt": "2025-04-24T10:03:45.000Z"
  }
}
```

#### âš™ï¸ ç‰¹åˆ«è¯´æ˜
- å½“å‰ä»·æ ¼ç”±åç«¯ä» `stockCache` ä¸­è·å–ï¼Œå‰ç«¯ä¸èƒ½æäº¤ä»·æ ¼ã€‚
- åç«¯å°†æŒ‰ç…§ `config/index.js` ä¸­é…ç½®çš„ `feeRate` è®¡ç®—æ‰‹ç»­è´¹ã€‚
- è‹¥è´¦æˆ·ä½™é¢ä¸è¶³ï¼Œå°†è¿”å›é”™è¯¯æç¤ºã€‚

---

### âœ… 8.2 å–å‡ºè‚¡ç¥¨

- **æ¥å£åœ°å€**ï¼š`POST /api/trade/sell`
- **æ¥å£è¯´æ˜**ï¼šæäº¤å–å‡ºäº¤æ˜“è¯·æ±‚ï¼Œç³»ç»Ÿæ ¡éªŒæŒä»“æ•°é‡å’Œå½“å‰è¡Œæƒ…ä»·æ ¼ï¼Œå®Œæˆäº¤æ˜“å¹¶è¿”è¿˜èµ„é‡‘ã€‚
- **è¯·æ±‚æ–¹å¼**ï¼šPOST
- **è¯·æ±‚å¤´éƒ¨**ï¼š
  - `Content-Type: application/json`

#### ğŸ“¥ è¯·æ±‚ä½“å‚æ•°

| å‚æ•°å | ç±»å‹   | æ˜¯å¦å¿…å¡« | ç¤ºä¾‹å€¼       | è¯´æ˜                 |
|--------|--------|----------|--------------|----------------------|
| userId | string | âœ…       | cm9wmnsmr0000uir8xxeebcia | ç”¨æˆ·å”¯ä¸€ ID          |
| code   | string | âœ…       | sh600519      | è‚¡ç¥¨ä»£ç              |
| name   | string | âœ…       | è´µå·èŒ…å°      | è‚¡ç¥¨åç§°             |
| amount | number | âœ…       | 1             | å–å‡ºè‚¡æ•°ï¼ˆæ•´æ•°ï¼‰     |

#### ğŸ“¤ è¿”å›ç»“æœç¤ºä¾‹

```json
{
  "success": true,
  "data": {
    "userId": "cm9wpy4j4000cuibghskg6cfb",
    "code": "sh600519",
    "name": "è´µå·èŒ…å°",
    "type": "SELL",
    "price": 1552.25,
    "amount": 1,
    "fee": 1.55,
    "createdAt": "2025-04-24T10:04:20.000Z"
  }
}
```

#### âš™ï¸ ç‰¹åˆ«è¯´æ˜
- å½“å‰ä»·æ ¼ç”±åç«¯è¡Œæƒ…ç¼“å­˜æä¾›ï¼Œç¦æ­¢ç”±å®¢æˆ·ç«¯ä¼ å…¥ã€‚
- åç«¯è‡ªåŠ¨æ ¡éªŒæŒä»“æ˜¯å¦å……è¶³ã€‚
- å–å‡ºåæŒ‰æˆäº¤é‡‘é¢æ‰£é™¤æ‰‹ç»­è´¹ï¼Œå‰©ä½™éƒ¨åˆ†åŠ å…¥è´¦æˆ·ä½™é¢ã€‚

---

### âœ… 8.3 æŸ¥è¯¢äº¤æ˜“å†å²è®°å½•

- **æ¥å£åœ°å€**ï¼š`GET /api/trade/history`
- **æ¥å£è¯´æ˜**ï¼šè·å–å½“å‰ç”¨æˆ·çš„äº¤æ˜“è®°å½•åˆ—è¡¨ï¼Œé»˜è®¤è¿”å›æœ€è¿‘ 100 æ¡ã€‚
- **è¯·æ±‚æ–¹å¼**ï¼šGET
- **è¯·æ±‚å‚æ•°**ï¼š

| å‚æ•°å | ç±»å‹   | æ˜¯å¦å¿…å¡« | ç¤ºä¾‹å€¼       | è¯´æ˜       |
|--------|--------|----------|--------------|------------|
| userId | string | âœ…       | user_test_001 | ç”¨æˆ·å”¯ä¸€ ID |

#### ğŸ“¤ è¿”å›ç»“æœç¤ºä¾‹

```json
{
  "success": true,
  "data": [
    {
      "type": "BUY",
      "code": "sh600519",
      "name": "è´µå·èŒ…å°",
      "price": 1552.25,
      "amount": 2,
      "fee": 3.1,
      "createdAt": "2025-04-24T10:03:45.000Z"
    },
    {
      "type": "SELL",
      "code": "sh600519",
      "name": "è´µå·èŒ…å°",
      "price": 1552.25,
      "amount": 1,
      "fee": 1.55,
      "createdAt": "2025-04-24T10:04:20.000Z"
    }
  ]
}
```

## ğŸ›¡ï¸ ç¼“å­˜æœºåˆ¶è¯´æ˜ï¼ˆç”¨æˆ·è®¿é—®è§¦å‘æ‡’åŠ è½½ + æœ¬åœ°ç¼“å­˜ï¼‰

| æ¥å£ | ç¼“å­˜è·¯å¾„ | ç¼“å­˜æœºåˆ¶ |
|------|-----------|-----------|
| å…¨é‡å¿«ç…§ | `cache/stock_cache.json` | å®šæ—¶æ›´æ–°ï¼Œæ¯10åˆ†é’Ÿç”±ä»»åŠ¡å†™å…¥ |
| è¡Œä¸šå¿«ç…§ | `cache/industry/:name.json` | å®šæ—¶æ›´æ–°ï¼Œç”±ä»»åŠ¡ç®¡ç† |
| çƒ­é—¨æ¦œå• | `cache/hot.json` | å®šæ—¶æ›´æ–°ï¼Œç”±ä»»åŠ¡ç®¡ç† |
| è‚¡ç¥¨è¯¦æƒ… | `cache/detail/:code.json` | é¦–æ¬¡è®¿é—®æ—¶æ‹‰å–å¹¶ç¼“å­˜ï¼Œæœ‰æ•ˆæœŸ10åˆ†é’Ÿ |
| Kçº¿å›¾ | `cache/kline/:code-period-range.json` | é¦–æ¬¡è®¿é—®æ‹‰å–å¹¶ç¼“å­˜ï¼Œæ— éœ€é‡å¤æ‹‰ |
| æ–°é—»æµ |å½“å‰ç‰ˆæœ¬è¿”å›ç©ºæ•°ç»„ï¼Œåç»­æ¥å…¥æ–°é—»æœç´¢æ¥å£ã€‚
- æ‰€æœ‰ä¹°å…¥ / å–å‡ºè¯·æ±‚å‡ä¾èµ– `stockCache` ä¸­ç¼“å­˜çš„è¡Œæƒ…å¿«ç…§ä»·æ ¼ã€‚
- æœåŠ¡ç«¯è´Ÿè´£è®¡ç®—æ‰‹ç»­è´¹ã€æ ¡éªŒè´¦æˆ·ä¸æŒä»“ã€æ›´æ–°èµ„äº§ä¸äº¤æ˜“è®°å½•ã€‚
- æ‰€æœ‰ä»·æ ¼ã€é‡‘é¢æ•°æ®ä¿ç•™ä¸¤ä½å°æ•°ã€‚
- å½“å‰äº¤æ˜“ä»…æ”¯æŒ A è‚¡ï¼ˆäººæ°‘å¸ç»“ç®—ï¼‰ï¼Œåç»­å°†æ”¯æŒæ¸¯è‚¡/ç¾è‚¡ã€‚
---

## ğŸ” ç”¨æˆ·æ³¨å†Œä¸èº«ä»½ç»‘å®šæ¥å£

### âœ… 1. æ³¨å†Œè´¦å·

- **æ¥å£è·¯å¾„**ï¼š`POST /api/auth/register`
- **è¯·æ±‚å‚æ•°**ï¼š

  | å‚æ•°å     | ç±»å‹   | æ˜¯å¦å¿…å¡« | ç¤ºä¾‹å€¼           | è¯´æ˜                     |
  |------------|--------|----------|------------------|--------------------------|
  | externalId | string | âœ…       | douyin_abc_001    | å¹³å°å”¯ä¸€èº«ä»½ï¼ˆå¦‚ openIdï¼‰|

- **è¯´æ˜**ï¼š
  - ç³»ç»Ÿå°†è‡ªåŠ¨ç”Ÿæˆ uniqueIdï¼Œåˆ›å»ºè´¦æˆ·ã€åˆå§‹èµ„é‡‘å’Œç»‘å®šå…³ç³»ã€‚
  - provider ä¸ç”±å‰ç«¯ä¼ å…¥ï¼Œé»˜è®¤ç”±æœåŠ¡ç«¯ä»£ç è‡ªåŠ¨èµ‹å€¼ï¼ˆå¦‚ open / wechat / douyinï¼‰ã€‚

- **å“åº”ç¤ºä¾‹**ï¼š
```json
{
    "success": true,
    "uniqueId": "NB9AG26G",
    "userId": "cm9wr601j0000uiqkrec6f26t"
}
```

---

### âœ… 2. ç»‘å®šæ‰‹æœºå·ï¼ˆå¯èƒ½è§¦å‘åˆå¹¶ï¼‰

- **æ¥å£è·¯å¾„**ï¼š`POST /api/auth/bind_phone`
- **è¯·æ±‚å‚æ•°**ï¼š

  | å‚æ•°å     | ç±»å‹   | æ˜¯å¦å¿…å¡« | ç¤ºä¾‹å€¼        | è¯´æ˜                     |
  |------------|--------|----------|---------------|--------------------------|
  | userId     | string | âœ…       | cma1tgtoa0000ui3cdjow691g   | å½“å‰è´¦å·çš„ userId     |
  | phone      | string | âœ…       | 13800138000    | æ‰‹æœºå·                   |
  | provider   | string | âœ…       | phone          | æ¸ é“æ ‡è¯†ï¼ˆå†™ "phone"ï¼‰   |
  | metadata   | JSON   | âŒ       | { "source": "H5" } | é™„åŠ ä¿¡æ¯ï¼ˆæ¸ é“æ¥æºç­‰ï¼‰|

- **è¯´æ˜**ï¼š
  - è‹¥è¯¥æ‰‹æœºå·å·²ç»‘å®šå…¶ä»–è´¦å·ï¼Œå°†è§¦å‘åˆå¹¶é€»è¾‘ï¼ˆåˆå¹¶èµ„é‡‘ã€è‚¡ç¥¨ã€ç»‘å®šä¿¡æ¯ï¼‰ã€‚

- **å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "success": true,
  "message": "æ‰‹æœºå·ç»‘å®šæˆåŠŸ",
  "userId": "cm9wmnsmr0000uir8xxeebcia"
}
```

---

### âš™ï¸ 3. åˆå¹¶é€»è¾‘è¯´æ˜ï¼ˆè‡ªåŠ¨è§¦å‘ï¼Œå‰ç«¯æ— éœ€è°ƒç”¨ï¼‰

- **è§¦å‘åœºæ™¯**ï¼šå½“æŸæ‰‹æœºå·é‡å¤ç»‘å®šè‡³ä¸åŒè´¦å·æ—¶è‡ªåŠ¨åˆå¹¶ã€‚
- **è°ƒç”¨æ–¹å¼**ï¼šæœåŠ¡ç«¯å†…éƒ¨æ‰§è¡Œ `mergeAccounts(primaryId, secondaryId)`ã€‚
- **åˆå¹¶å†…å®¹**ï¼š
  1. åˆå¹¶è´¦æˆ·ä½™é¢ï¼ˆbalanceï¼‰
  2. åˆå¹¶æŒä»“ï¼ˆåŠ æƒå¹³å‡ä»·æ ¼ï¼‰
  3. åˆå¹¶äº¤æ˜“è®°å½•ï¼ˆTradeï¼‰
  4. åˆå¹¶ç»‘å®šå…³ç³»ï¼ˆAuthBindingï¼‰
  5. åˆ é™¤è¢«åˆå¹¶è´¦å·ï¼ˆUserï¼‰


## 7ï¸âƒ£ AI è‚¡ç¥¨åˆ†ææ¥å£

### âœ… 1.1 è·å–AIè‚¡ç¥¨åˆ†æ

- **æ¥å£åœ°å€**ï¼š`POST /api/ai-chat/analyze`
- **æ¥å£è¯´æ˜**ï¼šåŸºäºè‚¡ç¥¨Kçº¿æ•°æ®å’Œç›¸å…³æ–°é—»ï¼Œç”±AIè§’è‰²æä¾›ä¸“ä¸šåˆ†æå’Œå»ºè®®
- **è¯·æ±‚æ–¹å¼**ï¼šPOST
- **è¯·æ±‚å¤´éƒ¨**ï¼š
  - `Content-Type: application/json`

#### ğŸ“¥ è¯·æ±‚ä½“å‚æ•°

| å‚æ•°å    | ç±»å‹   | æ˜¯å¦å¿…å¡« | ç¤ºä¾‹å€¼       | è¯´æ˜                 |
|-----------|--------|----------|--------------|----------------------|
| userId    | string | âœ…       | user123      | ç”¨æˆ·å”¯ä¸€ ID          |
| stockCode | string | âœ…       | SH600519     | è‚¡ç¥¨ä»£ç              |
| personaId | string | âŒ       | buffett      | AIè§’è‰²IDï¼ˆé»˜è®¤ä¸ºå·´è²ç‰¹ï¼‰|

#### ğŸ“¤ è¿”å›ç»“æœç¤ºä¾‹

```json
{
  "success": true,
  "data": {
    "response": "ä½œä¸ºä¸€åä»·å€¼æŠ•èµ„è€…ï¼Œæˆ‘æ€»æ˜¯å…³æ³¨ä¼ä¸šçš„ç«äº‰ä¼˜åŠ¿å’Œé•¿æœŸç›ˆåˆ©èƒ½åŠ›ã€‚è´µå·èŒ…å°æ‹¥æœ‰å¼ºå¤§çš„å“ç‰Œä»·å€¼å’Œç¨³å®šçš„ç°é‡‘æµï¼Œæœ€è¿‘å‡ ä¸ªå­£åº¦è¥æ”¶æŒç»­å¢é•¿...",
    "persona": {
      "id": "buffett",
      "name": "æ²ƒä¼¦Â·å·´è²ç‰¹",
      "title": "æŠ•èµ„å¤§å¸ˆ",
      "avatar": "/avatars/buffett.png"
    }
  }
}
```

#### âš™ï¸ ç‰¹åˆ«è¯´æ˜
- ç³»ç»Ÿä¼šæ ¹æ®stockCodeè‡ªåŠ¨è·å–è¯¥è‚¡ç¥¨çš„Kçº¿æ•°æ®å’Œç›¸å…³æ–°é—»
- å½“å‰æ”¯æŒçš„è§’è‰²åŒ…æ‹¬ï¼šå·´è²ç‰¹(buffett)ã€é‡åŒ–äº¤æ˜“ä¸“å®¶(quantTrader)
- AIåˆ†æç»“æœç”±DeepSeekæ¨¡å‹ç”Ÿæˆï¼Œä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®

### âœ… 1.2 è·å–å¯ç”¨çš„AIè§’è‰²åˆ—è¡¨

- **æ¥å£åœ°å€**ï¼š`GET /api/ai-chat/personas`
- **æ¥å£è¯´æ˜**ï¼šè·å–ç³»ç»Ÿæ”¯æŒçš„æ‰€æœ‰AIåˆ†æå¸ˆè§’è‰²ä¿¡æ¯
- **è¯·æ±‚æ–¹å¼**ï¼šGET

#### ğŸ“¤ è¿”å›ç»“æœç¤ºä¾‹

```json
{
  "success": true,
  "data": [
    {
      "id": "buffett",
      "name": "æ²ƒä¼¦Â·å·´è²ç‰¹",
      "title": "æŠ•èµ„å¤§å¸ˆ",
      "avatar": "/avatars/buffett.png"
    },
    {
      "id": "quantTrader",
      "name": "æ—é»˜",
      "title": "é‡åŒ–äº¤æ˜“ä¸“å®¶",
      "avatar": "/avatars/quant.png"
    }
  ]
}
```

##  æŸ¥è¯¢æ¥å£
### æŸ¥è¯¢èµ„äº§æ¥å£
/api/account?userId=xxx
æŸ¥è¯¢è´¦æˆ·èµ„äº§ï¼ˆAccount è¡¨ï¼‰
æ”¯æŒä¼  User.id æˆ– uniqueId
å¦‚æœè´¦æˆ·ä¸å­˜åœ¨ âœ è¿”å› 404

### æŸ¥è¯¢æŒä»“è´¦æˆ·
/api/account/holdings?userId=xxx
æŸ¥è¯¢å½“å‰æŒä»“ï¼ˆHolding è¡¨ï¼‰
æ”¯æŒ userId / uniqueId
é»˜è®¤æŒ‰ updatedAt å€’åºæ’åº

### æŸ¥è¯¢äº¤æ˜“è®°å½•
/api/account/trades?userId=xxx
æŸ¥è¯¢å†å²äº¤æ˜“è®°å½•ï¼ˆTrade è¡¨ï¼‰
åŒæ ·æ”¯æŒåŒå­—æ®µ
æŒ‰ createdAt å€’åºå±•ç¤º

## 8ï¸âƒ£ ä¹°æ¶¨ä¹°è·Œæ¸¸æˆæ¥å£

æä¾›ç®€æ˜“ç‰ˆä¹°æ¶¨ä¹°è·Œæ¸¸æˆåŠŸèƒ½ï¼Œç”¨æˆ·å¯é€‰æ‹©è‚¡ç¥¨ã€æ–¹å‘ã€é‡‘é¢å’Œæ—¶é—´å‘¨æœŸï¼Œè¿›è¡Œæ¶¨è·Œé¢„æµ‹äº¤æ˜“ã€‚

### âœ… 8.1 åˆ›å»ºä¹°æ¶¨ä¹°è·Œè®¢å•

- **æ¥å£åœ°å€**ï¼š`POST /api/battle/order`
- **æ¥å£è¯´æ˜**ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä¹°æ¶¨ä¹°è·Œæ¸¸æˆè®¢å•
- **è¯·æ±‚æ–¹å¼**ï¼šPOST
- **è¯·æ±‚å¤´éƒ¨**ï¼š
  - `Content-Type: application/json`

#### ğŸ“¥ è¯·æ±‚ä½“å‚æ•°

| å‚æ•°å      | ç±»å‹   | æ˜¯å¦å¿…å¡« | ç¤ºä¾‹å€¼       | è¯´æ˜                         |
|-------------|--------|----------|--------------|------------------------------|
| userId      | string | âœ…       | user123      | ç”¨æˆ·å”¯ä¸€ID                   |
| stockCode   | string | âœ…       | sh600519     | è‚¡ç¥¨ä»£ç                      |
| direction   | string | âœ…       | buy_up       | æ–¹å‘ï¼šbuy_up/buy_down        |
| betAmount   | number | âœ…       | 1000         | ä¸‹æ³¨é‡‘é¢                     |
| holdMinutes | number | âœ…       | 30           | æŒæœ‰å‘¨æœŸ(åˆ†é’Ÿ)               |

#### ğŸ“¤ è¿”å›ç»“æœç¤ºä¾‹

```json
{
  "success": true,
  "data": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "userId": "user123",
    "stockCode": "sh600519",
    "direction": "buy_up",
    "betAmount": 1000,
    "startPrice": 1550.75,
    "holdMinutes": 30,
    "settleTime": "2025-04-28T10:30:00Z",
    "status": "pending",
    "createdAt": "2025-04-28T10:00:00Z",
    "updatedAt": "2025-04-28T10:00:00Z"
  }
}
```

#### âš™ï¸ ç‰¹åˆ«è¯´æ˜
- ç³»ç»Ÿä½¿ç”¨ä¸‹å•æ—¶çš„è‚¡ç¥¨ä»·æ ¼ä½œä¸ºèµ·å§‹ä»·æ ¼
- æŒæœ‰å‘¨æœŸå¿…é¡»æ˜¯ç³»ç»Ÿé…ç½®çš„æœ‰æ•ˆæ—¶é—´ï¼ˆå¦‚5åˆ†é’Ÿ/10åˆ†é’Ÿ/30åˆ†é’Ÿ/1å°æ—¶ç­‰ï¼‰
- ä¸‹æ³¨é‡‘é¢æœ‰æœ€ä½å’Œæœ€é«˜é™åˆ¶
- ç”¨æˆ·ä½™é¢ä¸è¶³å°†è¿”å›é”™è¯¯

---

### âœ… 8.2 è·å–ç”¨æˆ·çš„ä¹°æ¶¨ä¹°è·Œè®¢å•åˆ—è¡¨

- **æ¥å£åœ°å€**ï¼š`GET /api/battle/orders`
- **æ¥å£è¯´æ˜**ï¼šè·å–ç”¨æˆ·çš„ä¹°æ¶¨ä¹°è·Œè®¢å•åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µå’ŒçŠ¶æ€ç­›é€‰
- **è¯·æ±‚æ–¹å¼**ï¼šGET

#### ğŸ“¥ è¯·æ±‚å‚æ•°

| å‚æ•°å   | ç±»å‹   | æ˜¯å¦å¿…å¡« | ç¤ºä¾‹å€¼     | è¯´æ˜                                   |
|----------|--------|----------|------------|---------------------------------------|
| userId   | string | âœ…       | user123    | ç”¨æˆ·å”¯ä¸€ID                             |
| status   | string | âŒ       | pending    | çŠ¶æ€ç­›é€‰(all/pending/settled/canceled) |
| page     | number | âŒ       | 1          | é¡µç ï¼Œé»˜è®¤1                            |
| pageSize | number | âŒ       | 20         | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20                       |

#### ğŸ“¤ è¿”å›ç»“æœç¤ºä¾‹

```json
{
  "success": true,
  "data": {
    "total": 15,
    "page": 1,
    "pageSize": 20,
    "data": [
      {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "userId": "user123",
        "stockCode": "sh600519",
        "direction": "buy_up",
        "betAmount": 1000,
        "startPrice": 1550.75,
        "holdMinutes": 30,
        "settleTime": "2025-04-28T10:30:00Z",
        "endPrice": 1555.80,
        "settlementResult": "win",
        "profitAmount": 800,
        "status": "settled",
        "createdAt": "2025-04-28T10:00:00Z",
        "updatedAt": "2025-04-28T10:30:05Z"
      },
      {
        "id": "550e8400-e29b-41d4-a716-446655440001",
        "userId": "user123",
        "stockCode": "sh601318",
        "direction": "buy_down",
        "betAmount": 500,
        "startPrice": 38.55,
        "holdMinutes": 60,
        "settleTime": "2025-04-28T11:00:00Z",
        "status": "pending",
        "createdAt": "2025-04-28T10:00:00Z",
        "updatedAt": "2025-04-28T10:00:00Z"
      }
    ]
  }
}
```

---

### âœ… 8.3 å–æ¶ˆä¹°æ¶¨ä¹°è·Œè®¢å•

- **æ¥å£åœ°å€**ï¼š`POST /api/battle/cancel`
- **æ¥å£è¯´æ˜**ï¼šå–æ¶ˆæœªç»“ç®—çš„ä¹°æ¶¨ä¹°è·Œè®¢å•å¹¶è¿”è¿˜èµ„é‡‘
- **è¯·æ±‚æ–¹å¼**ï¼šPOST
- **è¯·æ±‚å¤´éƒ¨**ï¼š
  - `Content-Type: application/json`

#### ğŸ“¥ è¯·æ±‚ä½“å‚æ•°

| å‚æ•°å  | ç±»å‹   | æ˜¯å¦å¿…å¡« | ç¤ºä¾‹å€¼                              | è¯´æ˜       |
|---------|--------|----------|------------------------------------|------------|
| orderId | string | âœ…       | 550e8400-e29b-41d4-a716-446655440001 | è®¢å•ID     |
| userId  | string | âœ…       | user123                           | ç”¨æˆ·å”¯ä¸€ID |

#### ğŸ“¤ è¿”å›ç»“æœç¤ºä¾‹

```json
{
  "success": true,
  "data": {
    "id": "550e8400-e29b-41d4-a716-446655440001",
    "userId": "user123",
    "stockCode": "sh601318",
    "direction": "buy_down",
    "betAmount": 500,
    "startPrice": 38.55,
    "holdMinutes": 60,
    "settleTime": "2025-04-28T11:00:00Z",
    "status": "canceled",
    "createdAt": "2025-04-28T10:00:00Z",
    "updatedAt": "2025-04-28T10:05:30Z"
  }
}
```

#### âš™ï¸ ç‰¹åˆ«è¯´æ˜
- åªèƒ½å–æ¶ˆçŠ¶æ€ä¸ºpendingçš„è®¢å•
- æ¥è¿‘ç»“ç®—æ—¶é—´ï¼ˆå¦‚5åˆ†é’Ÿå†…ï¼‰å¯èƒ½æ— æ³•å–æ¶ˆ
- å–æ¶ˆåå°†é€€è¿˜å…¨éƒ¨ä¸‹æ³¨é‡‘é¢

---

### âœ… 8.4 è·å–ä¹°æ¶¨ä¹°è·Œæ¸¸æˆé…ç½®

- **æ¥å£åœ°å€**ï¼š`GET /api/battle/config`
- **æ¥å£è¯´æ˜**ï¼šè·å–ä¹°æ¶¨ä¹°è·Œæ¸¸æˆçš„é…ç½®å‚æ•°ï¼ŒåŒ…æ‹¬æœ€ä½/æœ€é«˜ä¸‹æ³¨é‡‘é¢ã€å¥–åŠ±å€æ•°ç­‰
- **è¯·æ±‚æ–¹å¼**ï¼šGET

#### ğŸ“¤ è¿”å›ç»“æœç¤ºä¾‹

```json
{
  "success": true,
  "data": {
    "enabled": true,
    "minBetAmount": 100,
    "maxBetAmount": 10000,
    "rewardMultiplier": 1.8,
    "availableHoldMinutes": [5, 10, 30, 60, 120, 240]
  }
}
```

#### âš™ï¸ ç‰¹åˆ«è¯´æ˜
- åå°å¯è°ƒæ•´æ¸¸æˆå‚æ•°ï¼Œå®¢æˆ·ç«¯éœ€è¦æ ¹æ®æ­¤æ¥å£è¿”å›å€¼åŠ¨æ€è°ƒæ•´UI
- enabledä¸ºfalseæ—¶è¡¨ç¤ºåŠŸèƒ½æš‚æ—¶å…³é—­